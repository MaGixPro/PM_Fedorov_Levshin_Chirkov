# Use Cases — DormLaundry (бронь прачечной в общежитии)

## Контекст
DormLaundry — сервис бронирования прачечной/стиральных машин в общежитии: пользователи выбирают слот, бронируют, получают уведомления, подтверждают приход; администратор управляет машинами и правилами.

---

## UC01: Регистрация / вход

**Акторы:** Пользователь  
**Триггер:** Пользователь открывает приложение и выбирает “Войти/Зарегистрироваться”  
**Предусловия:** Нет  
**Результат:** Пользователь авторизован и попадает на главный экран

### Основной поток

| Шаг | Действие актора | Действие системы |
|---:|---|---|
| 1 | Выбирает вход по email/паролю (или регистрацию) | Показывает форму |
| 2 | Вводит данные | Валидирует формат |
| 3 | Подтверждает | Создаёт аккаунт/выполняет вход |
| 4 | | Открывает главный экран |

### Расширение A: Неверный пароль
| Шаг | Действие актора | Действие системы |
|---:|---|---|
| A1 | Вводит неверный пароль | Показывает ошибку и предлагает повторить |

---

## UC02: Просмотр расписания и свободных слотов

**Акторы:** Пользователь  
**Триггер:** Переходит в раздел “Расписание”  
**Предусловия:** Пользователь авторизован  
**Результат:** Пользователь видит свободные/занятые слоты

### Основной поток
| Шаг | Действие актора | Действие системы |
|---:|---|---|
| 1 | Выбирает дату | Загружает расписание |
| 2 | Выбирает прачечную/машину (опц.) | Фильтрует слоты |
| 3 | Просматривает | Показывает свободно/занято/правила |

---

## UC03: Бронирование слота (создание брони)

**Акторы:** Пользователь  
**Триггер:** Нажимает на свободный слот → “Забронировать”  
**Предусловия:** Пользователь авторизован; слот свободен  
**Результат:** Создана бронь со статусом “Активна”

### Основной поток
| Шаг | Действие актора | Действие системы |
|---:|---|---|
| 1 | Выбирает свободный слот | Показывает детали слота и правила |
| 2 | Подтверждает бронь | Проверяет конфликты и лимиты |
| 3 | | Создаёт бронь, присваивает статус “Активна” |
| 4 | | Отправляет уведомление о бронировании |

### Расширение A: Слот уже заняли
| Шаг | Действие актора | Действие системы |
|---:|---|---|
| A1 | Подтверждает | Сообщает, что слот уже занят; предлагает выбрать другой |

### Расширение B: Превышен лимит броней
| Шаг | Действие актора | Действие системы |
|---:|---|---|
| B1 | Пытается забронировать | Отклоняет и показывает причину (лимит/бан) |

---

## UC04: Отмена брони

**Акторы:** Пользователь  
**Триггер:** Открывает свою бронь → “Отменить”  
**Предусловия:** Есть активная бронь; до начала слота ≥ X минут  
**Результат:** Бронь отменена, слот освобождён

### Основной поток
| Шаг | Действие актора | Действие системы |
|---:|---|---|
| 1 | Нажимает “Отменить” | Спрашивает подтверждение |
| 2 | Подтверждает | Меняет статус на “Отменена” |
| 3 | | Освобождает слот и обновляет расписание |

### Расширение A: Слишком поздно отменять
| Шаг | Действие актора | Действие системы |
|---:|---|---|
| A1 | Пытается отменить | Запрещает отмену и показывает правило |

---

## UC05: Подтверждение прихода (“Я на месте”)

**Акторы:** Пользователь  
**Триггер:** В начале слота нажимает “Я на месте”  
**Предусловия:** Есть активная бронь; время слота началось  
**Результат:** Бронь подтверждена, не применяется штраф

### Основной поток
| Шаг | Действие актора | Действие системы |
|---:|---|---|
| 1 | Нажимает “Я на месте” | Проверяет время и бронь |
| 2 | | Меняет статус на “Подтверждена” |
| 3 | | Фиксирует факт прихода |

### Расширение A: Пользователь не подтвердил вовремя (no-show)
| Шаг | Действие актора | Действие системы |
|---:|---|---|
| A1 | Не делает действий | По таймеру отмечает no-show и применяет правило штрафа/блокировки |

---

## UC06: Завершение стирки (закрытие слота)

**Акторы:** Пользователь  
**Триггер:** Нажимает “Завершить” (или авто-завершение)  
**Предусловия:** Бронь подтверждена; слот активен  
**Результат:** Бронь закрыта, слот считается завершённым

### Основной поток
| Шаг | Действие актора | Действие системы |
|---:|---|---|
| 1 | Нажимает “Завершить” | Проверяет бронь |
| 2 | | Меняет статус на “Завершена” |
| 3 | | Обновляет расписание/статистику |

---

## UC07: Уведомления (напоминания)

**Акторы:** Пользователь  
**Триггер:** Наступает время напоминания  
**Предусловия:** Есть активная бронь  
**Результат:** Пользователь получает уведомление (до начала, в начале, за 10 минут до конца)

### Основной поток
| Шаг | Действие актора | Действие системы |
|---:|---|---|
| 1 | — | Планировщик отправляет напоминание |
| 2 | Открывает уведомление | Переходит в детали брони |

---

## UC08: Просмотр “Мои брони” и история

**Акторы:** Пользователь  
**Триггер:** Открывает “Мои брони”  
**Предусловия:** Авторизован  
**Результат:** Видит активные/прошлые брони

---

## UC09: Управление машинами (админ)

**Акторы:** Администратор  
**Триггер:** Открывает “Админ-панель” → “Машины”  
**Предусловия:** Админ авторизован  
**Результат:** Машины добавлены/отключены/изменены

---

## UC10: Управление правилами (лимиты/штрафы) (админ)

**Акторы:** Администратор  
**Триггер:** Открывает “Правила”  
**Предусловия:** Админ авторизован  
**Результат:** Настроены лимит броней, окно отмены, политика no-show

---

## UC11: Модерация конфликтов / жалоба

**Акторы:** Пользователь, Администратор  
**Триггер:** Пользователь отправляет жалобу на нарушение  
**Предусловия:** Авторизован  
**Результат:** Жалоба создана, админ видит и отмечает статус

---

## UC12: Отчёты по загрузке прачечной (админ)

**Акторы:** Администратор  
**Триггер:** Открывает “Отчёты”  
**Предусловия:** Админ авторизован  
**Результат:** Видит статистику загрузки, no-show, популярные часы
